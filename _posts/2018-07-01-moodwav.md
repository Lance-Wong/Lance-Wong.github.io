---
layout: post
title: (mood.wav) - Combining Natural Language Processing and Semi-Supervised Learning to create lyric-based playlists
---

# Overview

Music is one of my passions, and I love using Spotify's "Your Daily Mixes" feature to get my day going. It's incredible that Spotify is able to bucket songs together by genre, and overall it's a very satisfying product to use. However, in some cases, the way these mixes are structured can lead toward a negative user experience.  

![Daily mix 2]({{site.baseurl}}/assets/img/dailymix2.jpg)  

Take this playlist for example. Great song selection of rap and trap songs, and I appreciate the artist diversity. I would probably use this playlist for something high energy, like going out for a run or throwing a party. But when "Pineapple Skies" by Miguel appears (a slower, poppy, RnB-type song that sounds more like Pharell's "Happy" than Gucci Mane's "I Get The Bag") in my playlist, there is a change in flow, especially when the next song in the list is LPFJ2. See below for a little snippet:  

<iframe src="https://open.spotify.com/embed?uri=spotify:track:19EnyPZhNPbRoCxAuv5pKD" width="300" height="430" frameborder="0" allowtransparency="true" allow="encrypted-media">
          </iframe>

<iframe src="https://open.spotify.com/embed?uri=spotify:track:1j6kDJttn6wbVyMaM42Nxm" width="300" height="430" frameborder="0" allowtransparency="true" allow="encrypted-media">
          </iframe>  


In attempt to alleviate this sudden change in flow, I propose to develop an application that analyzes song lyrics, groups similar songs together, and creates a mix that is more like a DJ set than your average playlist.  

# Obtaining data  

I first pulled ~44,000 songs off of Spotify curated Hip-Hop/Rap/RnB playlists. From there, I used the song list to perform two tasks:

1. Pull audio features from the Spotify API
2. Find and scrape song lyrics using BeautifulSoup and the Genius API.  

Although there are so many sites that post lyrics, scraping for them can be a difficult task. If you're interested in collecting lyrics in general, I recommend taking a look at [pylyrics3](https://github.com/jameswenzel/pylyrics3) as well as [lyrics scraper by stanleycyang](https://github.com/stanleycyang/lyrics-scraper). I ended up making a custom scraper based off of stanleycyang's for my dataset.  

#  Working with the Corpus  

After cleaning my corpus through stopwords and lemmatization, I trained a doc2vec model with my corpus to find similarities between songs. doc2vec is an adaptation of word2vec, but in addition to finding similarities between words(assuming we're using PV-DM), doc2vec has the ability to find similarities between sentences and labels. In this case, we are talking about song lines and songs. The end result is a 150-dimensional vector space for each song in the dataset. Based off these vectors, my doc2vec model was able to create some interesting comparisions:

![Frank Ocean vs NAO]({{site.baseurl}}/assets/img/frank.jpg)

